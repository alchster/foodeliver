function preloader() {	if ($('#preloader').length) {		setTimeout(function() {			$('#preloader').fadeOut('slow', function() {				$('body').removeClass('overflow-hidden').css('padding', '');			});		}, 1000);	}}$(window).on('load', preloader);var CONSTANTS = {    slick: {        nextArrow: '<div class="slider-arrow slider-arrow--next"><svg><use xlink:href="#arrow-right"></use></svg></div>',        prevArrow: '<div class="slider-arrow slider-arrow--prev"><svg><use xlink:href="#arrow-left"></use></svg></div>'    }};//---------------------------------------//// Подключаем набор написаных скриптов (requare/developRequare.js)//---------------------------------------//// выполняем их после того, как DOM построится $(document).ready(function() {	 $.reject({  	//	header: 'Your browser is not supported here', // Header Text  	//	paragraph1: 'You are currently using an unsupported browser', // Paragraph 1  	//	paragraph2: 'Please install one of the many optional browsers below to proceed',  	//	closeMessage: 'Close this window at your own demise!' // Message below close window link  		 reject: { 			all: false,			msie: 9,			chrome: 40,			firefox: 30,			safari4: 4		}, 		display: [], // What browsers to display and their order (default set below)		browserShow: true, // Should the browser options be shown?		browserInfo: { // Settings for which browsers to display			chrome: {				// Text below the icon				text: 'Google Chrome',				// URL For icon/text link				url: 'http://www.google.com/chrome/'				// (Optional) Use "allow" to customized when to show this option				// Example: to show chrome only for IE users				// allow: { all: false, msie: true }			},			firefox: {				text: 'Mozilla Firefox',				url: 'http://www.mozilla.com/firefox/'			},			safari: {				text: 'Safari',				url: 'http://www.apple.com/safari/download/'			},			opera: {				text: 'Opera',				url: 'http://www.opera.com/download/'			},			msie: {				text: 'Microsoft Edge',				url: 'http://www.microsoft.com/'			}		},		// Pop-up Window Text		header: 'Did you know that your Internet Browser is out of date?',		paragraph1: 'Your browser is out of date, and may not be compatible with '+					'our website. A list of the most popular web browsers can be '+					'found below.',		paragraph2: 'Just click on the icons to get to the download page',		// Allow closing of window		close: true,		// Message displayed below closing link		closeMessage: 'By closing this window you acknowledge that your experience '+						'on this website may be degraded',		closeLink: 'Close This Window',		closeURL: '#',		// Allows closing of window with esc key		closeESC: true,		// Use cookies to remmember if window was closed previously?		closeCookie: false,		// Cookie settings are only used if closeCookie is true		cookieSettings: {			// Path for the cookie to be saved on			// Should be root domain in most cases			path: '/',			// Expiration Date (in seconds)			// 0 (default) means it ends with the current session			expires: 0		},		// Path where images are located		imagePath: './img/browsers/',		// Background color for overlay		overlayBgColor: '#000',		// Background transparency (0-1)		overlayOpacity: 0.8,		// Fade in time on open ('slow','medium','fast' or integer in ms)		fadeInTime: 'fast',		// Fade out time on close ('slow','medium','fast' or integer in ms)		fadeOutTime: 'fast',		// Google Analytics Link Tracking (Optional)		// Set to true to enable		// Note: Analytics tracking code must be added separately		analytics: false	}); 	//---------------------------------------//	// Подключаем скрипты компонентов страниц ( modules )	//---------------------------------------//	(function () {	    var basket = $('.basket');	    if(basket.length) {	        $('.js-basket-close-item').on('click', function () {	           $(this).closest('.js-removable-basket-item').detach();	        });	        basket.find('.tabs__caption li').on('click', function () {	            var tabIndex = +$(this).attr('data-tab');	            if(tabIndex === 1) {	                basket.addClass('total-is-shown')	            } else {	                basket.removeClass('total-is-shown')	            }	        })	    }	})();	function basketDrop() {	  if ($('.basket__info').length) {	      var trigger = $('.js-basket-stations');	      trigger.on('click', function (e) {	          e.preventDefault();	          var self = $(this);	          var parent = self.closest('.basket__info-item');	          var drop = parent.find('.basket__info-drop');	          var isOpened = parent.hasClass('opened');	          if (isOpened) {	              parent.removeClass('opened');	              drop.slideUp(200);	          } else {	              $('.basket__info-item').removeClass('opened');	              $('.basket__info-drop').slideUp(200);	              parent.addClass('opened');	              drop.slideDown(200);	          }	      });	      $(document).on('click', function (e) {	          if ($(e.target).closest('.basket__info').length) return;	          $('.basket__info-item').removeClass('opened');	          $('.basket__info-drop').slideUp(200);	      })	  }	}	basketDrop();	(function () {	  $("[data-fancybox]").fancybox();	}());	(function () {	    var contentSlider = $('.js-content-slider');	    if(contentSlider.length) {	        var currentContentSlide = $('.js-content-dots-is');	        var allDotsSlide = $('.js-content-dots-all');	        allDotsSlide.text($('.js-get-slides-number').length);	        contentSlider.slick ({	            slidesToShow: 1,	            slidesToScroll: 1,	            nextArrow: '<div class="slider-arrow-content slider-arrow-content--next"><svg><use xlink:href="#arrow-right"></use></svg></div>',	            prevArrow: '<div class="slider-arrow-content slider-arrow-content--prev"><svg><use xlink:href="#arrow-left"></use></svg></div>'	        })	            .on('beforeChange', function (event, slick, currentSlide, nextSlide) {	                currentContentSlide.text(nextSlide + 1);	            });	    }	})();	(function () {	    if ($('.filter-item').length) {	        var trigger = $('.js-show-filter');	        trigger.on('click', function (e) {	            e.preventDefault();	            var self = $(this);	            var parent = self.closest('.filter-item');	            var drop = parent.find('.filter-item__drop');	            var isOpened = parent.hasClass('opened');	            if (isOpened) {	                parent.removeClass('opened');	                drop.slideUp(200);	            } else {	                $('.filter-item').removeClass('opened');	                $('.filter-item__drop').slideUp(200);	                parent.addClass('opened');	                drop.slideDown(200);	            }	        });	        $(document).on('click', function (e) {	            if ($(e.target).closest('.filter').length) return;	            $('.filter-item').removeClass('opened');	            $('.filter-item__drop').slideUp(200);	        })	    }	})();	(function () {	    var footer = $('.js-footer');	    function autoFooter() {	        if ($('.js-footer').length) {	            var wrapper = $('.wrapper');	            var footerHeight = footer.outerHeight();	            footer.css('margin-top', -footerHeight);	            wrapper.css('padding-bottom', footerHeight);	        }	    }	    setTimeout(autoFooter, 100);	    $(window).on('resize', autoFooter);	})();	(function () {	    var header = $('.header');	    var headerHeight = header.innerHeight();	    var wrapper = $('.wrapper');	    $(window).on('scroll', function () {	        var scroll = $(document).scrollTop();	       if(scroll > 0) {	           wrapper.css('padding-top', headerHeight);	           header.addClass('fixed');	       } else {	           wrapper.css('padding-top', 0);	           header.removeClass('fixed');	       }	    });	    $('.js-clear-search').on('click', function () {	       $(this).parent().find('input').val('');	    });	}());	(function () {	    var history = $('.history');	    if (history.length) {	        var sliderOptions = {	            slidesToScroll: 1,	            slidesToShow: 6,	            variableWidth: true,	            infinite: false,	            nextArrow: CONSTANTS.slick.nextArrow,	            prevArrow: CONSTANTS.slick.prevArrow,	            responsive: [	                {	                    breakpoint: 1440,	                    settings: {	                        slidesToShow: 5	                    }	                },	                {	                    breakpoint: 1210,	                    settings: {	                        slidesToShow: 4	                    }	                },	                {	                    breakpoint: 975,	                    settings: {	                        slidesToShow: 3	                    }	                }	            ]	        };	        var historySlider = $('.history__slider');	        $('.js-row-trigger').on('click', function () {	            $(this).toggleClass('is-opened')	                .next().find('.history__table-drop').slideToggle(200);	        });	        historySlider.slick(sliderOptions);	        //fix slick into the table	        $(window).on('load resize', function () {	            var parent = $('.history');	            parent.find('.history__slider').css('width', parent.width());	        })	    }	})();	(function () {	    var restoSlider = $('.js-resto-slider');	    if(restoSlider.length) {	        var options = {	            slidesToShow: 6,	            slidesToScroll: 1,	            autoplay: true,	            autoplaySpeed: 3000,	            nextArrow: CONSTANTS.slick.nextArrow,	            prevArrow: CONSTANTS.slick.prevArrow,	            responsive: [	                {	                    breakpoint: 1440,	                    settings: {	                        slidesToShow: 5	                    }	                },	                {	                    breakpoint: 1030,	                    settings: {	                        slidesToShow: 4	                    }	                },	                {	                    breakpoint: 850,	                    settings: {	                        slidesToShow: 3	                    }	                }	            ]	        };	        restoSlider.slick(options)	    }	    if($('.plate__news').length) {	        $('.plate__news').clone().appendTo('.plate__news-mob');	    }	})();	(function () {	    var citySlider = $('.js-city-slider');	    if(citySlider.length) {	        var option = {	            slidesToShow: 1,	            slidesToScroll: 1,	            prevArrow: CONSTANTS.slick.prevArrow,	            nextArrow: CONSTANTS.slick.nextArrow,	            autoplay: true,	            autoplaySpeed: 3000	        };	        $('.js-clone-name-from').each(function (i, el) {	           $(el).closest('.slick-slide').find('.city__slide-name-mob').text($(el).text());	        });	        citySlider.slick(option);	    }	})();	(function () {	    var weather = $('.js-weather-slider');	    if(weather.length) {	        var options = {	            slidesToShow: 1,	            slidesToScroll: 1,	            nextArrow: CONSTANTS.slick.nextArrow,	            prevArrow: CONSTANTS.slick.prevArrow	        };	        weather.slick(options)	    }	})();	(function () {	    var popup = $('.popup');	    if(popup.length) {	        $('.js-popup').fancybox({	            smallBtn: false,	            toolbar: false,	            touch: false	        });	        //validator	        $('.js-validator').parsley();	        window.Parsley.on('field:error', function() {	            this.$element.attr('placeholder', this.$element.attr('data-error-placeholder'));	            if(this.$element.hasClass('js-select')) {	                this.$element.next('.jq-selectbox__select')	                    .find('.jq-selectbox__select-text')	                    .text(this.$element.attr('data-error-placeholder'));	            }	        });	    }	})();	(function () {	    var addLink = $('.js-item-add');	    if (addLink.length) {	        addLink.on('click', function () {	            var self = $(this);	            var addressToBasket = self.attr('data-basket-link');	            var parent = self.closest('.restaurant-item');	            if (self.attr('data-next-click-to-basket') === 'true') {	                window.location = addressToBasket;	            } else {	                self.attr('data-next-click-to-basket', 'true');	                self.find('.js-txt-change').text('В корзину');	                fly(parent);	            }	            function fly(target) {	                var width = target.innerWidth();	                var height = target.innerHeight();	                var top = target[0].getBoundingClientRect().top;	                var left = target[0].getBoundingClientRect().left;	                var clone = target.clone();	                clone.css({	                    'position': 'fixed',	                    'top': top,	                    'left': left,	                    'z-index': '100',	                    'width': width,	                    'height': height	                })	                    .appendTo($('body'))	                    .animate({	                        opacity: 0.5,	                        left: '100%',	                        top: 0,	                        width: 0,	                        height: 0	                    }, 1000, function () {	                        $(this).remove();	                    });	            }	        });	    }	})();	(function () {	    var goods = $('.goods');	    if(goods.length) {	        var body = $('.js-goods-body');	        var calculator = function () {	            body.each(function(i, el){	                var height = $(el).innerHeight();	                $(el).closest('.goods').find('.js-goods-img')	                    .css('height', 'calc(100% - ' + height + 'px)')	            })	        };	        setTimeout(calculator, 200);	        $(window).on('resize', calculator);	    }	})();	(function () {	    var schedule = $('.js-schedule-tabs');	    if (schedule.length) {	        var input = $('.js-schedule-search');	        var subTab = $('.js-schedule-filter');	        var tables = $('.schedule__sh');	        schedule.find('.tabs__caption li').on('click', function () {	            input.val('');	            clearFilter();	        });	        subTab.on('click', 'li:not(.active)', function () {	            input.val('');	            clearFilter();	            $(this)	                .addClass('active').siblings().removeClass('active')	                .closest('.js-schedule-tabs').find('.tabs__content.active .schedule__sub-content')	                .removeClass('active').eq($(this).index()).addClass('active');	            $(this)	                .closest('.js-schedule-tabs').find('.tabs__content:not(.active) .schedule__sub-content')	                .removeClass('active').eq($(this).index()).addClass('active');	        });	        input.on('keyup', function () {	            var tableActiveRow = $('.tabs__content.active .schedule__sub-content.active .schedule__sh tr');	            var value = $(this).val().toLowerCase();	            var number = '';	            var city = '';	            tableActiveRow.each(function (i, el) {	                number = $(el).find('.js-number').text().toLowerCase();	                city = $(el).find('.js-city').text().toLowerCase();	                if(number.indexOf(value) !== -1 || city.indexOf(value) !== -1) {	                    $(el).removeClass('hidden');	                } else {	                    $(el).addClass('hidden');	                }	            });	        });	        function clearFilter() {	            tables.find('tr').removeClass('hidden')	        }	    }	})();	(function () {	    var search = '.js-search';	    if ($(search).length) {	        var form = $('.js-search-form');	        form.on('focus', function () {	            var val = $(this).val().toLowerCase();	            $(this).closest(search).find('.search__drop').addClass('is-active');	            $(this).closest(search).find('.js-search-list li').each(function (i, el) {	                var text = $(el).text().toLowerCase();	                if (text.indexOf(val) !== -1) {	                    $(el).addClass('is-shown');	                } else {	                    $(el).removeClass('is-shown')	                }	            });	            if (!val) {	                $(this).closest(search).find('.js-search-list li').removeClass('is-shown');	            }	        });	        form.on('blur', function () {	            var self = $(this);	            setTimeout(function () {	                self.closest(search).find('.search__drop').removeClass('is-active');	            }, 200)	        });	        form.closest(search).find('.js-search-list li').on('click', function () {	            $(this).closest(search).find('.js-search-form').val($(this).text());	        });	        form.on('keyup', function () {	            var self = $(this);	            var val = self.val().toLowerCase();	            self.closest(search).find('.js-search-list li').each(function (i, el) {	                var text = $(el).text().toLowerCase();	                if (text.indexOf(val) !== -1) {	                    $(el).addClass('is-shown');	                } else {	                    $(el).removeClass('is-shown')	                }	            });	            if (!val) {	                self.closest(search).find('.js-search-list li').removeClass('is-shown');	            }	        });	    }	})();	(function () {	    var contentSlider = $('.js-slider-head');	    if(contentSlider.length) {	        contentSlider.slick ({	            slidesToShow: 1,	            slidesToScroll: 1,	            dots: true,	            nextArrow: '<div class="slider-arrow-head slider-arrow-head--next"><svg><use xlink:href="#arrow-r"></use></svg></div>',	            prevArrow: '<div class="slider-arrow-head slider-arrow-head--prev"><svg><use xlink:href="#arrow-l"></use></svg></div>'	        })	    }	})();	(function () {	    if($('.taxi').length) {	        try {	            jQuery.getScript("http://api-maps.yandex.ru/2.0/?load=package.full&amp;lang=ru-RU", function () {	                var myMap;	                function init() {	                    myMap = new ymaps.Map("call-taxi-map", {	                        center: [54.373963, 48.583420],	                        zoom: 12	                    });	                }	                ymaps.ready(init);	            });	        }	        catch (e) {	            console.error('Error: ', e);	        }	        $('.js-taxi-trigger').on('click', function () {	            $('.js-taxi-drop').slideToggle(200);	        });	    }	})();	(function () {	    //icon pack => http://icondrawer.com/free.php	    var cityCode = {	        0: {	            city: 'Russia',	            cityCode: 're',	            mask: '+7',	            img: 'pic/flags/ru.png'	        },	        1: {	            city: 'Ukraine',	            cityCode: 'ua',	            mask: '+38',	            img: 'pic/flags/ua.png'	        },	        2: {	            city: 'Armenia',	            cityCode: 'ar',	            mask: '+374',	            img: 'pic/flags/Armenia.png'	        },	        3: {	            city: 'Azerbaijan',	            cityCode: 'az',	            mask: '+994',	            img: 'pic/flags/Azerbaijan.png'	        },	        4: {	            city: 'Belarus',	            cityCode: 'be',	            mask: '+375',	            img: 'pic/flags/Belarus.png'	        },	        5: {	            city: 'China',	            cityCode: 'ch',	            mask: '+86',	            img: 'pic/flags/China.png'	        },	        6: {	            city: 'Georgia',	            cityCode: 'ge',	            mask: '+995',	            img: 'pic/flags/Georgia.png'	        },	        7: {	            city: 'Kazakhstan',	            cityCode: 'ka',	            mask: '+7',	            img: 'pic/flags/Kazakhstan.png'	        },	        8: {	            city: 'Kyrgyzstan',	            cityCode: 'ky',	            mask: '+996',	            img: 'pic/flags/Kyrgyzstan.png'	        },	        9: {	            city: 'Moldova',	            cityCode: 'mo',	            mask: '+373',	            img: 'pic/flags/Moldova.png'	        },	        10: {	            city: 'Tajikistan',	            cityCode: 'ta',	            mask: '+992',	            img: 'pic/flags/Tajikistan.png'	        },	        11: {	            city: 'Turkmenistan',	            cityCode: 'tu',	            mask: '+993',	            img: 'pic/flags/Turkmenistan.png'	        },	        12: {	            city: 'Uzbekistan',	            cityCode: 'uz',	            mask: '+998',	            img: 'pic/flags/Uzbekistan.png'	        }	    };	    if ($('.select-tel').length || $('.select-tel--lg').length) {	        var select = $('.js-select-city');	        function init() {	            $(".input--tel").mask(cityCode[0].mask + " (nnn)nnn-nnnn");	            var style = '';	            for (key in cityCode) {	                var opt = '<option value="' + key + '" class="select-city__item select-city__item--' + cityCode[key].cityCode + '">' + cityCode[key].city + '</option>';	                select.append(opt);	                style += '.select-city__item--' + cityCode[key].cityCode + '{background-image: url(' + cityCode[key].img + ')}';	            }	            $('.js-flag-style').html('<style>' + style + '</style>');	            $('.select-city').styler();	        }	        select.on('change', function () {	            var code = cityCode[$(this).val()].cityCode;	            var selectedClass = 'select-city__item--' + code;	            var changingElem = $(this);	            var oldClass = changingElem.attr('class');	            var oldClassN = oldClass.indexOf('select-city__item--');	            changingElem.removeClass(oldClass.substr(oldClassN, 21));	            changingElem.addClass(selectedClass);	            $(this).closest('.js-parent').find(".input--tel").val('')	                .attr('placeholder', cityCode[$(this).val()].mask + '(___)___-____')	                .mask(cityCode[$(this).val()].mask + " (nnn)nnn-nnnn");	        });	        init();	    }	})();	(function () {	    var timer = $('.js-timer');	    var timerStatusContainer = '.js-timer-status';	    var statusClass = {	        expired: 'is-timer-expired',	        almostDone: 'is-timer-less-15-min'	    };	    var declOfNum = (function () {	        var cases = [2, 0, 1, 1, 1, 2];	        var declOfNumSubFunction = function (titles, number) {	            number = Math.abs(number);	            return titles[(number % 100 > 4 && number % 100 < 20) ? 2 : cases[(number % 10 < 5) ? number % 10 : 5]];	        }	        return function (_titles) {	            if (arguments.length === 1) {	                return function (_number) {	                    return declOfNumSubFunction(_titles, _number)	                }	            } else {	                return declOfNumSubFunction.apply(null, arguments)	            }	        }	    })();	    var countHours = declOfNum(['час', 'часа', 'часов']);	    var countMinutes = declOfNum(['минута', 'минуты', 'минут']);	    var countSeconds = declOfNum(['секнда', 'секунды', 'секунд']);	    function timerProcessor(el, callIndex) {	        var timerId = 'timer_id_' + callIndex;	        var expired = el.attr('data-expired');	        el.attr('id', timerId);	        el.countdown(expired)	            .on('update.countdown', function (e) {	                var hours = e.offset.totalHours;	                var minutes = e.offset.minutes;	                var seconds = e.offset.seconds;	                var colorClass = 'js-timer--blue';	                var hasHour = hours + ' ' + countHours(hours) + ' ' + minutes + ' ' + countMinutes(minutes) + ' ' + seconds +	                    ' ' + countSeconds(seconds);	                var doNotHasHour = minutes + ' ' + countMinutes(minutes) + ' ' + seconds + ' ' + countSeconds(seconds);	                var text = hours === 0 ? doNotHasHour : hasHour;	                if (hours === 0) {	                    if (minutes <= 14) {	                        colorClass = 'js-timer--green';	                        $(this).closest(timerStatusContainer).addClass(statusClass.almostDone)	                    }	                }	                el.removeClass('js-timer--green js-timer--blue js-timer--red');	                el.addClass(colorClass);	                $(this).text(text);	            })	            .on('finish.countdown', function () {	                var text = '00 часов 00 минут 00 секунд';	                el.removeClass('js-timer--green js-timer--blue js-timer--red');	                el.addClass('js-timer--red');	                $(this).text(text);	                $(this).closest(timerStatusContainer).removeClass(statusClass.almostDone).addClass(statusClass.expired);	            });	    }	    if (timer.length) {	        timer.each(function (i, el) {	            timerProcessor($(el), i)	        })	    }	})();	//---------------------------------------//	// Подключаем основные скрипты ( develop )	//---------------------------------------//	;(function ($) {	    //custom scroll	    setTimeout(function () {	        $(".js-scroll").mCustomScrollbar();	    }, 100);	    //tabs	    $('ul.tabs__caption').on('click', 'li:not(.active)', function () {	        $(this)	            .addClass('active').siblings().removeClass('active')	            .closest('div.tabs').find('div.tabs__content').removeClass('active').eq($(this).index()).addClass('active');	    });	    //flipper	    $('.flipper').flip({	        trigger: 'manual',	        speed: 800	    });	    $('.flipper').hover(function () {	        var self = $(this);	        setTimeout(function () {	            self.flip(true);	        }, 400);	    }, function () {	        var self = $(this);	        self.flip(false);	    });	    //select	    $('.js-select').styler();	    //spinner	    $('.js-spinner').spinner();	    //show categories	    $('#js-categories-drop').css('display', 'none');	    $('#js-categories-trigger').on('click', function () {	        $('#js-categories-drop').slideToggle(200);	    });	    //scroll-to	    $(".js-scroll-to").mPageScroll2id({offset: 80});	    $('.js-stop-propagation').on('click', function (e) {	        e.stopPropagation();	    });	}($));});