var apiPath="/api";function apiCall(t,a,o){var i;return t=t.toUpperCase(),a=apiPath+a,"GET"!==t&&(console.log(o),o=JSON.stringify(o||{}),i="application/json; charser=utf-8"),console.log("API call: ["+t+"] "+a+' data: "'+o+'"'),$.ajax({type:t,url:a,data:o,contentType:i,statusCode:{401:function(){window.location="/logout"}}})}$(function(){$(".header__logout .header__menu-link").click(function(){window.location="/logout"}),$(".moderators__list .switch input:checkbox").change(function(t){var a=$(this).closest(".js-moderators-item"),o=$(a).find(".moderators__user-id").html(),i="/"+$(a).find(".moderators__user-type").html();data="/supplier"==i?{status_code:this.checked?1:0}:{enabled:this.checked},apiCall("PUT",i+"/"+o,data)}),$(".moderators__list .moderators__form").submit(function(t){t.preventDefault();var a=$(this).closest(".js-moderators-item"),o=$(a).find(".moderators__user-id").html();apiCall("PUT","/"+$(a).find(".moderators__user-type").html()+"/"+o,{login:$(this).find("input[name=login]").val(),password:$(this).find("input[name=password]").val()})}),$(".moderators__item--add .moderators__btn-create").click(function(t){t.preventDefault();var a=$(this).closest(".moderators__item--add"),o=$(a).find("input[name=description]").val(),i=$(a).find("select[name=Select]").val(),e=$(a).find("input[name=login]").val(),n=$(a).find("input[name=password]").val(),s=$(a).find("input[name=email]").val();""!==o&&apiCall("POST","supplier"===i?"/supplier":"/user",{description:o,login:e,password:n,email:s,admin:"administrator"===i}).then(function(t){window.location=window.location})}),$(".moderators__list .js-moderators-del").click(function(){var t=$(this).closest(".js-moderators-item"),a=$(t).find(".moderators__user-id").html(),o="/"+$(t).find(".moderators__user-type").html();document.api.call("DELETE",o+"/"+a)})});